<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>DreamX ‚Ä¢ PvP</title>

  <link rel="stylesheet" href="/src/css/tokens.css" />
  <link rel="stylesheet" href="/src/css/layout.css" />
  <link rel="stylesheet" href="/src/css/pvp.css" />
</head>

<body class="dx theme-light">
  <div class="dx-app">

    <!-- TOP BAR -->
    <header class="dx-topbar">
      <div class="dx-topbar__inner">
        <div class="dx-brand">
          <div class="dx-brand__logo">DX</div>
          <div class="dx-brand__text">
            <div class="dx-brand__title">PvP</div>
            <div class="dx-brand__subtitle">1 vs 1</div>
          </div>
        </div>
        <div class="dx-chip">Live</div>
      </div>
    </header>

    <!-- CONTENT -->
    <main class="dx-content dx-game dx-pvp">
      <section class="dx-game-card">

        <!-- VS row (–≤—ñ–∑—É–∞–ª—å–Ω–æ —è–∫ —É Figma/–±–æ—Ç-–µ–∫—Ä–∞–Ω—ñ) -->
        <div class="dx-pvp-vs">
          <div class="dx-pvp-side">
            <div class="dx-avatar dx-avatar--sm"><span>–¢–ò</span></div>
            <div class="dx-pvp-name" data-me-name>–¢–∏</div>
          </div>

          <div class="dx-pvp-vs__mid">VS</div>

          <div class="dx-pvp-side">
            <div class="dx-avatar dx-avatar--sm"><span>OP</span></div>
            <div class="dx-pvp-name" data-op-name>–°—É–ø–µ—Ä–Ω–∏–∫</div>
          </div>
        </div>

        <!-- Counters row (—è–∫ —É bot game) -->
        <div class="dx-counters-row">
          <div class="dx-pill">
            <span>–†–∞—É–Ω–¥</span>
            <b><span data-round>1</span></b>
          </div>
          <div class="dx-pill">
            <span>–†–∞—Ö—É–Ω–æ–∫</span>
            <b><span data-score>0 : 0</span></b>
          </div>
        </div>

        <h1 class="dx-game-title">RPS</h1>

        <p id="pvp-status" class="dx-game-status">
          –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —á–µ—Ä–≥–∏...
        </p>

        <!-- Board (—è–∫ —É bot game, –∞–ª–µ USER/OPP) -->
        <div class="dx-round-board">
          <div class="dx-round-row">
            <div class="dx-round-label">OPP</div>
            <div class="dx-dots">
              <div class="dx-dot" data-bot-0></div>
              <div class="dx-dot" data-bot-1></div>
              <div class="dx-dot" data-bot-2></div>
              <div class="dx-dot dx-dot--score" data-round-score>0</div>
            </div>
          </div>

          <div class="dx-round-row">
            <div class="dx-round-label">–¢–ò</div>
            <div class="dx-dots">
              <div class="dx-dot" data-user-0></div>
              <div class="dx-dot" data-user-1></div>
              <div class="dx-dot" data-user-2></div>
              <div class="dx-dot dx-dot--score" data-user-round-score>0</div>
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div class="dx-rps-buttons">
          <button class="dx-rps-btn" data-move="rock">ü™® –ö–∞–º—ñ–Ω—å</button>
          <button class="dx-rps-btn" data-move="scissors">‚úÇÔ∏è –ù–æ–∂–∏—Ü—ñ</button>
          <button class="dx-rps-btn" data-move="paper">üìÑ –ë—É–º–∞–≥–∞</button>
        </div>

        <button class="dx-btn dx-btn--primary dx-back"
                onclick="window.location.href='./index.html'">
          –ù–∞–∑–∞–¥
        </button>

      </section>
    </main>

    <!-- BOTTOM BAR -->
    <footer class="dx-bottombar">
      <div class="dx-bottombar__inner">
        <div class="dx-bottombar__label">Created by Oleksandr Krychylskyi</div>
      </div>
    </footer>

  </div>
  <!-- JS -->
  <script src="/src/js/dreamx_core.js?v=16"></script>
  <script src="/src/js/api_client.js?v=16"></script>
  <script src="/src/js/pvp_client.js?v=16"></script>
  <script src="/src/js/pvp_screen.js?v=16"></script>

  <script>
    const statusEl = document.getElementById("pvp-status");

    function setStatus(text) {
      statusEl.textContent = text;
    }

    PvPScreen.events.onQueueJoined = () => setStatus("üîç –ü–æ—à—É–∫ —Å—É–ø–µ—Ä–Ω–∏–∫–∞...");
    PvPScreen.events.onWaitingOpponent = () => setStatus("‚è≥ –û—á—ñ–∫—É—î–º–æ –¥—Ä—É–≥–æ–≥–æ –≥—Ä–∞–≤—Ü—è...");
    PvPScreen.events.onMatchStarted = () => setStatus("‚öîÔ∏è –ì—Ä–∞ –ø–æ—á–∞–ª–∞—Å—å! –ó—Ä–æ–±–∏ —Ö—ñ–¥ üëá");
    PvPScreen.events.onCanMove = () => setStatus("üéØ –¢–≤—ñ–π —Ö—ñ–¥");
    PvPScreen.events.onRoundResolved = () => setStatus("‚úÖ –•—ñ–¥ –∑–∞—Ä–∞—Ö–æ–≤–∞–Ω–æ");
    PvPScreen.events.onError = (err) => {
      console.error(err);
      setStatus("‚ö†Ô∏è –ü–æ–º–∏–ª–∫–∞ PvP");
    };

    document.querySelectorAll("[data-move]").forEach(btn => {
      btn.addEventListener("click", () => {
        PvPScreen.sendMove(btn.dataset.move);
        setStatus("‚è≥ –û—á—ñ–∫—É—î–º–æ —Ö—ñ–¥ —Å—É–ø–µ—Ä–Ω–∏–∫–∞...");
      });
    });

    PvPScreen.start();
  </script>

</body>
</html>
